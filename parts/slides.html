<section>
    <section class="subsection color--radiant" id="sw_object">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1>The SpinW object</h1>
            <div class="description">
                Fields of the SpinW object
            </div>
        </div>
    </section>
<section class="blank" id="sw_properties">
    <style>
        .limiter {
            width: 100%;
            margin: 0 auto;
        }

        .wrap-table100 {
            width: 100%;
            display: -webkit-box;
            display: -webkit-flex;
            display: -moz-box;
            display: -ms-flexbox;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        table {
            border-spacing: 1;
            border-collapse: collapse;
            background: #F8F8F8;
            border-radius: 10px;
            overflow: hidden;
            width: 100%;
            margin: 0 auto;
            position: relative;
        }
        table * {
            position: relative;
        }
        table td, table th {
            padding-left: 8px;
        }
        table thead tr {
            height: 60px;
            background: #36304a;
        }
        table tbody tr {
            height: 50px;
        }
        table tbody tr:last-child {
            border: 0;
            border-right: none;
        }
        table tbody td:last-child {
            border-right: none;
        }
        table td, table th {
            text-align: left;
        }
        table td.l, table th.l {
            text-align: right;
        }
        table td.c, table th.c {
            text-align: center;
        }
        table td.r, table th.r {
            text-align: center;
        }


        .table100-head th{
            color: #fff;
            line-height: 1.2;
            font-weight: unset;
        }

        tbody tr:nth-child(even) {
            background-color: #E8E8E8;
        }

        tbody tr {
            color: #606060;
            line-height: 1.2;
            font-weight: unset;
        }

        tbody tr:hover {
            color: #555555;
            background-color: #f5f5f5;
            cursor: pointer;

        }

        .lastcolumn {
            text-align: right;
        }
        @media screen and (max-width: 640px) {
            table {
                overflow-x: auto;
                display: block;
            }
        }

        @media screen and (max-width: 992px) {
            table {
                display: block;
            }
            table > *, table tr, table td, table th {
                display: block;
            }
            table thead {
                display: none;
            }
            table tbody tr {
                height: auto;
                padding: 37px 0;
            }
            table tbody tr td {
                padding-left: 40% !important;
                margin-bottom: 24px;
            }
            table tbody tr td:last-child {
                margin-bottom: 0;
            }
            table tbody tr td:before {
                font-family: OpenSans-Regular;
                font-size: 14px;
                color: #999999;
                line-height: 1.2;
                font-weight: unset;
                position: absolute;
                width: 40%;
                left: 30px;
                top: 0;
            }

            tbody tr {
                font-size: 14px;
            }
        }
    </style>
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section"> spinw properties >>properties(spinw) </div>
        </div>
        <content>
                <div class="wrap-table100">
                    <div class="table100">
            <table>
                <thead>
                <tr class="table100-head">
                    <th><code>lattice</code></th>
                    <th><code>unit_cell</code></th>
                    <th><code>matrix</code></th>
                    <th><code>sinlge_ion</code></th>
                    <th><code>coupling</code></th>
                    <th><code>mag_str</code></th>
                    <th><code>unit</code></th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>angle</td>
                    <td>r</td>
                    <td>mat</td>
                    <td>aniso</td>
                    <td>dl</td>
                    <td>F</td>
                    <td class="lastcolumn">kB</td>
                </tr>
                <tr>
                    <td>lat_const</td>
                    <td>S</td>
                    <td>label</td>
                    <td>g</td>
                    <td>atom1</td>
                    <td>k</td>
                    <td class="lastcolumn">muB</td>
                </tr>
                <tr>
                    <td>sym</td>
                    <td>label</td>
                    <td></td>
                    <td>field</td>
                    <td>atom2</td>
                    <td>nExt</td>
                    <td class="lastcolumn">mu0</td>
                </tr>
                <tr>
                    <td></td>
                    <td>ff</td>
                    <td></td>
                    <td>T</td>
                    <td>mat_idx</td>
                    <td></td>
                    <td class="lastcolumn">label</td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>idx</td>
                    <td></td>
                    <td></td>
                </tr>
                </tbody>
            </table>
                    </div>
                </div>
            
            <p>Example:</p>
            
            <figure class="code">
                <pre>
                <code class="lang-matlab" style="line-height: 0.25rem; overflow: hidden;">
obj.lattice.lat_const = [3 3 4];
                </code>
                </pre>
            </figure>
            Functions:
            <figure class="code">
                <pre>
                <code class="lang-matlab" style="line-height: 0.25rem; overflow: hidden;">
obj.genlattice('lat_const',[3 3 4], 'sym', 1,'angled',[90 90 120]);
                </code>
                </pre>
            </figure>
        </content>
    </div>
</section>
</section>

<section>
    <section class="subsection color--radiant" id="sw_latticeHead">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1><code>lattice</code> properties</h1>
            <div class="description">
                How to describe a lattice.
            </div>
        </div>
    </section>

<section class="showit" id="co-ordSystem">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section"> Coordinate systems </div>
        </div>
        <content>
            Most of the data stored in the fields of SpinW has a coordinate system. There are 3 coordinate systems.
            <div class="profile">
                <div class="basics">
                    <img src="plots/coOrd.svg"/>
                    <!--<div class="name">Some Important Image</div>-->
                    <!--<div class="role">These are some more details...</div>-->
                </div>
                <div class="details">
                    <div>
                    <p>
                    <h2>Lattice unit (lu):</h2>
                    <ul>
                        <li>defined by the unit cell: (a, b, c, $\alpha$, $\beta$, $\gamma$)</li>
                        <li>atomic position</li>
                    </ul>
                    <h2><br>Reciprocal lattice unit (rlu):</h2>
                    <ul>
                        <li>momentum transfer</li>
                        <li>magnetic propagation vector(s)</li>
                    </ul>
                    <h2><br>xyz Descartes coordinate system:</h2>
                    <ul>
                        <li>momentum transfer in $\unicode{x212B}^{-1}$ unit</li>
                        <li>magnetic field</li>
                        <li>magnetic moments</li>
                        <li>J, A, g matrices</li>
                        <li>components of the spin-spin correlation function</li>
                    </ul>
                    </p>
                    </div>
                </div>
            </div>
        </content>
    </div>
</section>

<section class="blank" id="transformations">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section"> SpinW Class </div>
        </div>
        <content>
        <p>We have three types of tensor variable: <b>polar vector, axial vector, 2d tensors.</b></p>
            <p>The respective transformation rules using orthogonal matrices are:</p>
            \[\begin{aligned}
            \nu^{'} &amp; = R\nu \\
            \nu^{'} &amp; = \det(R)R\nu \\
            T^{'} &amp; = RTR^{T}
            \end{aligned} \]
            <p>Where $\nu$ is a column vector.</p>
            <p>To generate transformation matrices use:</p>
            Rotation:
            <figure class="code">
                <pre><code class="matlab"> R = sw_rotmat(rotAxis, rotAngle);</code></pre>
            </figure>
            Mirroring:
            <figure class="code">
                <pre><code class="matlab">[~, R] = sw_mirror(normalAxis);</code></pre>
            </figure>
        </content>
    </div>
</section>

<section class="blank" id="unit_cell">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section"> Unit cell </div>
        </div>
        <content>

            <p>The crystal lattice information is stored in <b><code>spinw.lattice</code></b> , to define the parameters use:</p>

            <ul>
                <li><code>spinw.genlattice()</code> with options: <code>lat_const, angle, angled, sym</code></li>
                <li>sym option accept name of space group or symmetry operators in matrix</li>
            </ul>

            <p>The symmetry inequivalent atoms are stored in <b><code>spinw.unit_cell</code></b> with following parameters:</p>

            <ul>
                <li>position in lattice units in <b>r</b></li>
                <li>spin quantum number in <b>S</b></li>
                <li>string <b>label</b> with magnetic form factor definition (FullProf convention, e.g. MCr3 for Cr$^{3+}$ ions)
                </li>
                <li><b>color</b> for plotting (RGB code for each atom)</li>
            </ul>

            <h4><br>To define the atoms use:</h4>

            <ul>
                <li><code>spinw.addatom()</code> function with options as above</li>
                <li>function checks the validity of the input and has default values (e.g. S can be generated from the
                    label)
                </li>
                <li>defines magnetic form factor</li>
            </ul>
        </content>
    </div>
</section>

<section class="blank" id="mag_lattice_sym">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section"> Magnetic lattice from symmetry </div>
        </div>
        <content>

            <p>Magnetic lattice is dynamically generated from:</p>

            <ul>
                <li>unit cell parameters (a, b, c, angles) stored in <code>spinw.lattice</code></li>
                <li>magnetic atoms (S>0) stored in <code>spinw.unit_cell</code></li>
                <li>space group stored in <code>spinw.lattice.sym</code></li>
            </ul>

            <p>The function <code>M = <b>spinw.matom()</b></code> generates the positions:</p>

            <ul>
                <li>we call the number of magnetic atoms in the unit cell: <code>nMagAtom</code></li>
                <li>position in l.u. in <code>M.r</code></li>
                <li>index pointing to the atom in <code>spinw.unit_cell</code> stored in <code>M.idx</code></li>
                <li>spin quantum number stored in <code>M.S</code></li>
            </ul>

            <p>
                The space group generators are stored in the <code>symmetry.dat</code> file, and <code>spinw.lattice.sym</code> stores
                all symmetry operators of the space group<br>
            </p>
            <code style="font-size:0.75rem">
                <p style="line-height:0.25rem">204 I m -3 : x+1/2,y+1/2,z+1/2; -x,-y,z; -x,y,-z; z,x,y; -x,-y,-z</p>
                <p style="line-height:0.75rem; background-color:#EEEDEF ">205 P a -3 : -x+1/2,-y,z+1/2; -x,y+1/2,-z+1/2; z,x,y; -x,-y,-z</p>
                <p style="line-height:0.25rem">206 I a -3 : x+1/2,y+1/2,z+1/2; -x+1/2,-y,z+1/2; -x,y+1/2,-z+1/2; z,x,y; -x,-y,-z</p>
            </code>

            <p><br>
                The first <code>nMagAtom</code> magnetic moment directions stored in <code>spinw.mag_str.S</code> are corresponding to
                the magnetic lattice generated by <code>spinw.matom()</code>.
            </p>
        </content>
    </div>
</section>

<section class="blank" id="spacegroups">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Space groups</div>
        </div>
        <content>

            <p>The generators of the 230 space group with standard settings are stored in <code>symmetry.dat</code>.</p>

            <ul>
                <li>to add a new setting or permute axes, use <br>
                    <code>sym = swsym.add(symStr, {symName})</code></li>
                <li>use the line number in <code>spinw.lattice.sym</code></li>
                <li>P0 $\neq$ P1</li>
            </ul>

            <br>
            <h4><br>The space group is used:</h4>

            <ul>
                <li>generate the atomic positions $\rightarrow$ ALWAYS</li>
                <li>determines equivalent bonds</li>
                <li>allowed terms in the magnetic Hamiltonian</li>
                <li>magnetic structure? Not yet</li>
            </ul>
            <p>If symmetry is off for bonds, the equivalent bonds will be generated based on length.</p>

            <h4>
                Reduce symmetry:
            </h4>
            <ul>
                <li><code>spinw.no_sym()</code> removes all symmetries $\rightarrow$ P0 and repopulates <code>spinw.unit_cell</code> with all the
                    originally generated positions.</li>
                <li><code>{T} = spinw.newcell(bvect, {bshift})</code> creates a new unit cell and reduce the symmetry
                    to P0 and return the transformation matrix: <code>Qrlu_new = T * Qrlu_old</code></li>
            </ul>
        </content>
    </div>
</section>
</section>
<section>
    <section class="subsection color--radiant" id="sw_matrixHead">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1><code>matrix</code> properties</h1>
            <div class="description">
                How to describe a matrix.
            </div>
        </div>
    </section>

    <section class="blank" id="matrices">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Matrices</div>
        </div>
        <content>

            <h4>3x3 matrices can be stored in the <code>spinw.matrix</code> field:</h4>

            <ul>
                <li>values are stored in a <b><code>3x3xnMat</code></b> matrix (mat subfield)</li>
                <li>label and color stores corresponding label and color for plotting</li>
            </ul>

            <p><b>These matrices are really just numbers.</b> They will be part of the Hamiltonian once they are assigned
                to a single ion anisotropy, g-tensor or exchange coupling.</p>

            <h4><br>To add new matrix use <code>spinw.addmatrix()</code>. </h4>
                <p>The matrix value is given in the <code>mat</code> option:</p>
            <ul>
                <li>single number gives Heisenberg interaction, e.g. <code>mat = J1</code></li>
                <li>vector gives a Dzyaloshinskii-Moriya interaction, e.g. <code>mat = [D1 0 D2]</code></li>
                <li>generall accept 3x3 matrices, e.g. <code>mat = diag([Jxy Jxy Jz])</code></li>
            </ul>

            <p>Each matrix can be referenced by its index (e.g. <code>mat(:,:,idx)</code>) or by ist label (e.g.
                <code>J1</code>).</p>
        </content>
    </div>
</section>
</section>
<section>
    <section class="subsection color--radiant" id="sw_coup0lingeHead">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1><code>coupling</code> properties</h1>
            <div class="description">
                How to describe the coupling in a cell.
            </div>
        </div>
    </section>
<section class="blank" id="bonds">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Bonds</div>
        </div>
        <content>

            <h4>Bonds are stored in <b><code>spinw.coupling</code></b> field:</h4>

            <ul>
                <li>each bond is defined by the index of 2 interacting magnetic atoms of the magnetic lattice...</li>
                <li>... and a translation vector in lattice units (dl)</li>
                <li>the bond has a direction: <code>matom.r(:,atom1)</code> $\rightarrow$ <code>matom.r(:,atom2) + dl</code></li>
                <li>each bond has an increasing index (<code>idx</code>), starting with 1</li>
                <li>equivalent bonds have the same index</li>
                <li>each bond can have a pointer to 3 different matrices that define the J value (<code>mat_idx</code>)</li>
            </ul>

            <p>The bonds are generated from the magnetic lattice and the space group (if any) using the
                <b><code>spinw.gencoupling()</code></b> method:</p>
            <ul>
                <li><code>maxDistance</code> option determines the maximum bond length that will be generated</li>
                <li>can generate up $10^6$ bonds/s, can be used for very large unit cell for dipole-dipole interaction</li>
            </ul>

            <h4>To assign a matrix to a bond use <b><code>spinw.addcoupling()</code></b>:</h4>
            <ul>
                <li>assigned matrix is given by a matrix label or index (option <code>mat</code>)</li>
                <li>bond can be given by an index (option <code>bond</code>)</li>
                <li>sub indices can be also given (option <code>subIdx</code>)</li>
            </ul>
        </content>
    </div>
</section>

<section class="showit" id="gencouplings1">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section"> spinw.gencoupling() </div>
        </div>
        <content>
            <div class="profile">
                <div class="basics">
                    <img src="plots/lattice.svg" />
                    <!--<div class="name">Some Important Image</div>-->
                    <!--<div class="role">These are some more details...</div>-->
                </div>
                <div class="details">
                    <p>GENerates COUPLINGs</p>
                    <p>
                    <ul>
                        <li>all inter-ion distances are calculated within a fixed radius</li>
                        <li>couplings are sorted by <b>length</b></li>
                    </ul>
                    </p>
                </div>
            </div>
        </content>
    </div>
</section>

<section class="showit" id="gencouplings2">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section"> spinw.gencoupling() </div>
        </div>
        <content>
            <div class="profile">
                <div class="basics">
                    <img src="plots/lattice.svg" width="75%"/>
                    <!--<div class="name">Some Important Image</div>-->
                    <!--<div class="role">These are some more details...</div>-->
                </div>
                <div class="details">
                    <p>GENerates COUPLINGs</p>
                    <p>
                    <ul>
                        <li>all inter-ion distances are calculated within a fixed radius</li>
                        <li>couplings are sorted by <b>length</b></li>
                    </ul>
                    </p>
                    <div class="wrap-table100">
                        <div class="table100">
                            <table>
                                <thead>
                                <tr class="table100-head">
                                    <th colspan="8" style="text-align: center;"><code>obj.coupling</code></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>dl(1,:)</code></td>
                                    <td>1</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>1</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>dl(2,:)</code></td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>-1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>dl(3,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>atom1</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>atom2</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat_idx(1,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat_idx(2,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat_idx(3,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>idx</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>3</td>
                                    <td>...</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </content>
    </div>
</section>

<section class="showit" id="gencouplings3">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section"> spinw.gencoupling() </div>
        </div>
        <content>
            <div class="profile">
                <div class="basics">
                        <img src="plots/lattice.svg" width="75%"/>
                        <!--<div class="name">Some Important Image</div>-->
                    <!--<div class="role">These are some more details...</div>-->

                    <div class="wrap-table100">
                        <div class="table100">
                            <table>
                                <thead>
                                <tr class="table100-head">
                                    <th colspan="4" style="text-align: center;"><code>obj.matrix</code></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat(1,:,1)</code></td>
                                    <td style="background-color: #E8E8E8;">1</td>
                                    <td>0</td>
                                    <td>0</td>
                                </tr>

                                <tr style="background-color: #f5f5f5;">
                                    <td style="border-right: 1px solid #606060"><code>mat(2,:,1)</code></td>
                                    <td>0</td>
                                    <td style="background-color: #E8E8E8;">1</td>
                                    <td>0</td>
                                </tr>

                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat(3,:,1)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td style="background-color: #E8E8E8;">1</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="details">
                    <p>GENerates COUPLINGs</p>
                    <p>
                    <ul>
                        <li>all inter-ion distances are calculated within a fixed radius</li>
                        <li>couplings are sorted by <b>length</b></li>
                    <li>after <code>spinw.gencoupling()</code>:</li>
                </ul>
                    </p>
                    <div class="wrap-table100">
                        <div class="table100">
                            <table>
                                <thead>
                                <tr class="table100-head">
                                    <th colspan="8" style="text-align: center;"><code>obj.coupling</code></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>dl(1,:)</code></td>
                                    <td>1</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>1</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>dl(2,:)</code></td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>-1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>dl(3,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>atom1</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>atom2</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat_idx(1,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat_idx(2,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat_idx(3,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>idx</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>3</td>
                                    <td>...</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </content>
    </div>
</section>




<section class="showit" id="gencouplings4">

    <style>
        #container {
            width: 100%;
            height: 100%;
            position: relative;
        }
        #navi,
        #infoi {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
        #infoi {
            z-index: 10;
            top: 50px;
            left: 50px;
        }
    </style>

    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section"> spinw.gencoupling() </div>
        </div>
        <content>
            <div class="profile">
                <div class="basics">
                    <img src="plots/lattice.svg" width="75%"/>
                    <!--<div class="name">Some Important Image</div>-->
                    <!--<div class="role">These are some more details...</div>-->
                    <div id="container">
                        <div id="navi" style="opacity: 0.5;">
                    <div class="wrap-table100">
                        <div class="table100">
                            <table>
                                <thead>
                                <tr class="table100-head">
                                    <th colspan="4" style="text-align: center;"><code>obj.matrix</code></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat(1,:,1)</code></td>
                                    <td style="background-color: #E8E8E8;">1</td>
                                    <td>0</td>
                                    <td>0</td>
                                </tr>

                                <tr style="background-color: #f5f5f5;">
                                    <td style="border-right: 1px solid #606060"><code>mat(2,:,1)</code></td>
                                    <td>0</td>
                                    <td style="background-color: #E8E8E8;">1</td>
                                    <td>0</td>
                                </tr>

                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat(3,:,1)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td style="background-color: #E8E8E8;">1</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                        </div>
                        <div id="infoi">
                    <div class="wrap-table100" style="z-index: 1;position: absolute;top: -25px;">
                        <div class="table100">
                            <table>
                                <thead>
                                <tr class="table100-head">
                                    <th colspan="4" style="text-align: center;"><code>obj.matrix</code></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat(1,:,1)</code></td>
                                    <td style="background-color: #E8E8E8;">1</td>
                                    <td>0</td>
                                    <td>0</td>
                                </tr>

                                <tr style="background-color: #f5f5f5;">
                                    <td style="border-right: 1px solid #606060"><code>mat(2,:,1)</code></td>
                                    <td>0</td>
                                    <td style="background-color: #E8E8E8;">1</td>
                                    <td>0</td>
                                </tr>

                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat(3,:,1)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td style="background-color: #E8E8E8;">1</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                    </div>
                </div>
                <div class="details">
                    <p>GENerates COUPLINGs</p>
                    <p>
                    <ul>
                        <li>all inter-ion distances are calculated within a fixed radius</li>
                        <li>couplings are sorted by <b>length</b></li>
                        <li>after <code>spinw.gencoupling()</code>:</li>
                    </ul>
                    </p>
                    <div class="wrap-table100">
                        <div class="table100">
                            <table>
                                <thead>
                                <tr class="table100-head">
                                    <th colspan="8" style="text-align: center;"><code>obj.coupling</code></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>dl(1,:)</code></td>
                                    <td>1</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>1</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>dl(2,:)</code></td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>-1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>dl(3,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>atom1</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>atom2</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat_idx(1,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat_idx(2,:)</code></td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>mat_idx(3,:)</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>...</td>
                                </tr>
                                <tr>
                                    <td style="border-right: 1px solid #606060"><code>idx</code></td>
                                    <td>1</td>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>3</td>
                                    <td>...</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <code>sw.addcoupling('mat','J1','bond',idx)</code>
                </div>
            </div>
        </content>
    </div>
</section>
</section>
<section>
    <section class="subsection color--radiant" id="sw_singleIonHead">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1><code>single_ion</code> properties</h1>
            <div class="description">
                How to add single ion properties.
            </div>
        </div>
    </section>

<section class="blank" id="single_ion">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Single ion properties</div>
        </div>
        <content>
            <h4>Single ion</h4>
            <p>g-tensor and external field values are stored in <code>spinw.single_ion</code>.</p>
            <p>Subfields:</p>
            <ul>
                <li><code>aniso</code> single ion anisotropy is stored with <code>1xnMagAtom</code> and a pointer to a matrix</li>
                <li><code>g</code> g-tensor is <code>nMagAtom</code></li>
                <li><code>field</code> stored as a row vector</li>
            </ul>

            <p>
                To assign anisotropy use <b><code>spinw.addaniso(matLabel,{atomIdx})</code></b>
                with matrix label and optional atom indices of labels.
            </p>
            <p>
                Similar function <code>spinw.addg()</code>.
            </p>
        </content>
    </div>
</section>
</section>
<section>
    <section class="subsection color--radiant" id="sw_magStrHead">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1><code>mag_srt</code> properties</h1>
            <div class="description">
                How to add a magnetic structure.
            </div>
        </div>
    </section>
<section class="blank" id="magStr">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Magnetic structure</div>
        </div>
        <content>
            <h4>Magnetic structure is stored in the <b><code>spinw.mag_str field</code></b>.</h4>
            <p>It can store arbitrary magnetic structures using Fourier components.</p>
            <p>Subfields:</p>

            <ul>
                <li>magnetic supercell in l.u. stored in <b><code>nExt</code></b></li>
                <li>k-vector(s) stored in <b><code>k</code></b></li>
                <li>Fourier transform of the spin expectation value in <b><code>F</code></b></li>
            </ul>

            <p>
                The number of magnetic moments stored in <code>F</code> are: <code>nMagExt = prod(nExt)*nMagAtom</code>
            </p>
            <figure class="image" style="width: 100%">
                <p><img src="plots/momentlayout.svg" style="width: 15%;" alt="Mag_str">
                <figcaption class="text">Ordering of the unit cell in the magnetic super-cell.</figcaption>
            </figure>
            <p>
                The experimental magnetization can be obtained by multiplying <code>F</code> with the g-tensor!
            </p>
        </content>
    </div>
</section>

<section class="blank" id="magStr_RF">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Magnetic structure in rotating frame</div>
        </div>
        <content>

            <p>For spin wave calculation, the complex magnetic structure is converted to the rotating frame representation using the
                <code>spinw.magstr()</code> function.</p>
            <p>Output of <code>spinw.magstr()</code> is a struct with fields:</p>
            <ul>
                <li>size of magnetic supercell in l.u. stored in <b><code>nExt</code></b></li>
                <li>single k-vector stored in <b><code>k</code></b></li>
                <li>vector normal to the spiral plane is stored in <b><code>n</code></b></li>
                <li>real magnetic moment directions (spin quantization axis) are stored in <b><code>S</code></b></li>
            </ul>

            <p>The representation allows an additional <code>k=0</code> component parallel to <code>n</code>, however this is rarely used.</p>
            <p>The conversion from Fourier components to rotating frame representation is not always possible, in this case
                <code>magstr()</code> gives the best approximation and gives a warning. The conversion is approximate:</p>
            <ul>
                <li>multi-k structures</li>
                <li>non-Bravais lattice with counter-rotating incommensurate spirals</li>
                <li>non-Bravais lattice with non-coplanar spirals</li>
                <li>non-Bravais antiferromagnet with non-coplanar moments</li>
            </ul>
        </content>
    </div>
</section>

<section class="blank" id="magSC">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">All other information</div>
        </div>
        <content>
            <h1 style="text-align: center">This will be covered in the magnetic structure presentation.<br><br>
                <a href="http://www.spinw.org/magneticStructurePresentation" target="_blank"> Magnetic Structure Presentation</a></h1>
        </content>
    </div>
</section>


<!--<section class="blank" id="enterMagStr">-->
    <!--<div class="grid-wrapper">-->
        <!--<div class="header">-->
            <!--<div class="logo"></div>-->
            <!--<div class="section">Input magnetic structures</div>-->
        <!--</div>-->
        <!--<content>-->
        <!--<p>To input magnetic structures use <code>spinw.genmagstr(‘mode’,...)</code></p>-->
            <!--<p>Possible modes:</p>-->
            <!--<h3>RANDOM</h3>-->
            <!--<p>random real and imaginary magnetization vectors</p>-->
            <!--<h3>DIRECT</h3>-->
            <!--<p>direct input of every field</p>-->
            <!--<h3>TILE</h3>-->
            <!--<p>tile a magnetic supercell using the given data</p>-->
            <!--<h3>HELICAL – FOURIER</h3>-->
            <!--<p>extend the given structure by applying rotations on the moments-->
                <!--moments are either given in rotating frame formalism (S,n) or as complex vectors (S)</p>-->
            <!--<h3>ROTATE</h3>-->
            <!--<p>uniform rotation of all moments</p>-->
            <!--<h3>FUNC</h3>-->
            <!--<p>give parameters to a constraint function to generate magnetic structure</p>-->
        <!--</content>-->
    <!--</div>-->
<!--</section>-->

<!--<section class="blank" id="optMagStrOptions">-->
    <!--<div class="grid-wrapper">-->
        <!--<div class="header">-->
            <!--<div class="logo"></div>-->
            <!--<div class="section">Optimize magnetic structures</div>-->
        <!--</div>-->
        <!--<content>-->
            <!--<p>The magnetic structure can be optimised as a classical ground state of the spin Hamiltonian.</p>-->
            <!--<p>Three methods are available:</p>-->
            <!--<h2><code>sw.optmagk()</code></h2>-->
            <!--<ul>-->
                <!--<li>determines the magnetic propagation vector + n-vector</li>-->
            <!--</ul>-->
            <!--<h2><code>sw.optmagtsteep()</code></h2>-->
            <!--<ul>-->
                <!--<li>optimise magnetic structure for a given k-vector by succesively rotating each moment to the Weiss-->
                    <!--field direction</li>-->
                <!--<li>fastest</li>-->
                <!--<li>recommended if k-vector is known</li>-->
            <!--</ul>-->
            <!--<h2><code>sw.optmagstr()</code></h2>-->
            <!--<ul>-->
                <!--<li>optimise magnetic structure for minimum energy using non-linear optimization (fminsearch)</li>-->
                <!--<li>can include a constraint function (<code>@gm_planar()</code>, etc.)</li>-->
            <!--</ul>-->
            <!--<h2><code>sw.anneal()</code></h2>-->
            <!--<ul>-->
                <!--<li>performs simulated annealing, using the Metropolis algorithm</li>-->
                <!--<li>can calculate thermodynamic properties</li>-->
            <!--</ul>-->
        <!--</content>-->
    <!--</div>-->
<!--</section>-->


<!--&lt;!&ndash;TODO make flow diagram for spin optimisation&ndash;&gt;-->
<!--<section class="blank" id="optMagStrFns">-->
    <!--<div class="grid-wrapper">-->
        <!--<div class="header">-->
            <!--<div class="logo"></div>-->
            <!--<div class="section">spinw.optmagstr(‘func’,@func, ‘xmin’, x1, ‘xmax’, x2,...)</div>-->
        <!--</div>-->
        <!--<content>-->
            <!--<p>To optimize magnetic structure with constraints, use the spinw.optmagstr() method.</p>-->
            <!--<ul>-->
                <!--<li>lots of parameters to fit: $3N_{mag} + 6$</li>-->
                <!--<li>ground state magnetic structure with <b>constrained optimization</b> (simplex method)</li>-->
                <!--<li>constraints through external function:</li>-->
                <!--$$[M, k, n] = @(x)\mathtt{func}(M0, x)$$-->
                <!--<li><b><code>@gm_planar()</code></b> planar magnetic structure:</li>-->
                <!--$$[M, k, n] = \mathtt{@gm\_planar}(M0, x) \\-->
                <!--x = (\varphi_1,\varphi_2,... ,k_x,k_y,k_z,n_\Theta,n_\varphi)$$-->
                <!--<li><b><code>@gm_spherical3d()</code></b> general magnetic structure:</li>-->
                <!--$$[M, k, n] = \mathtt{@gm\_spherical3d}(M0, x) \\-->
                <!--x = (\varphi_1,\Theta_1,\varphi_2,\Theta_2,... ,k_x,k_y,k_z,n_\Theta,n_\varphi)$$-->
                <!--<li>limits: <code>xmin</code> and <code>xmax</code>, starting value <code>x0</code></li>-->
            <!--</ul>-->
        <!--</content>-->
    <!--</div>-->
<!--</section>-->
</section>

<section>

    <section class="subsection color--radiant" id="sw_hamHead">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1>Evaluating the Hamiltonian</h1>
            <div class="description">
                Details about actually solving a system.
            </div>
        </div>
    </section>


<section class="blank" id="spinHamiltonian">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Definition of the spin Hamiltonian</div>
        </div>
        <content>
            <p>The spin Hamiltonian from LSWT: </p>
            <h2>
                $$H = \sum_{mi, mj} S^{T}_{mi}J_{mi, nj}S_{nj} + \sum_{mi}S^{T}_{mi}A_{i}S_{mi} + \mu_BH^{T}\sum_{mi}g_iS_{mi}$$
            </h2>
            <p>Identify the symbols:</p>
            <ul>
                <li>($m$,$n$) unit cell indices: SpinW only stores the (0,0) cell the rest is taken care by a Fourier-
                    transformation</li>
                <li>($i$,$j$) index of the magnetic atom on the magnetic supercell</li>
                <li>$S_{mi}$ are stored in <code>spinw.mag_str.S</code></li>
                <li>$J_{mi, nj}$ are given by:
                <ul>
                    <li><code>spinw.coupling.atom1</code> $\rightarrow$ $i$</li>
                    <li><code>spinw.coupling.atom2</code> $\rightarrow$ $j$</li>
                    <li><code>spinw.coupling.dl</code> $\rightarrow$ $m-n$</li>
                    <li><code>spinw.matrix.mat(:,:,spinw.coupling.mat_idx)</code> $\rightarrow$ $J$</li>
                </ul>
                </li>
                <li>$H$ is given by <code>spinw.single_ion.field</code></li>
            </ul>
        </content>
    </div>
</section>

<section class="team" id="genCoupling1">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">spinw.gencoupling()</div>
        </div>
        <content>
            <div class="profile">
                <div class="basics">
                    <!--TODO - Make plot 1-->
                    <img src="plots/coOrd.svg"/>
                  </div>
                <div class="details">
                    <figure class="code">
                        <pre>
                            <code class="lang-matlab">
cryst=spinw;
cryst.genlattice('sym','P 4','lat_const',[8 8 6]);
cryst.addatom('r',[1/4 1/4 0],’S’,1);
cryst.gencoupling;
cryst.addmatrix('label','A',’value',1-eye(3));
cryst.addaniso('A’);
                            </code>
                        </pre>
                    </figure>
                </div>
                <div class="basics">
                    <!--TODO - Make plot 2-->
                    <img src="plots/coOrd.svg"/>
                </div>
                <div class="details">
                    <figure class="code">
                        <pre>
                            <code class="lang-matlab">
cryst=spinw;
cryst.genlattice('lat_const',[8 8 6]);
cryst.addatom('r',[1/4 1/4 0],'S',1);
cryst.addatom('r',[3/4 1/4 0],'S',1);
cryst.addatom('r',[1/4 3/4 0],'S',1);
cryst.addatom('r',[3/4 3/4 0],'S',1);
cryst.gencoupling;
cryst.addmatrix('label','A','value',1-eye(3));
cryst.addaniso('A');
                            </code>
                        </pre>
                    </figure>
                </div>
            </div>
        </content>
    </div>
</section>

<section class="team" id="genCoupling2">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">spinw.gencoupling()</div>
        </div>
        <content>
            <div class="profile">
                <div class="basics">
                    <!--TODO - Make plot 3-->
                    <img src="plots/coOrd.svg"/>
                </div>
                <div class="details">
                    <figure class="code">
                        <pre>
                            <code class="lang-matlab">
cryst=spinw;
cryst.genlattice('sym','P 4','lat_const',[8 8 6]);
cryst.addatom('r',[1/4 1/4 0],’S’,1);
cryst.gencoupling;
cryst.addmatrix('label','D',’value',[1 -1 0]);
cryst.addcoupling(‘mat’,'D',’bond’,1);
                            </code>
                        </pre>
                    </figure>
                </div>
                <div class="basics">
                    <!--TODO - Make plot 4-->
                    <img src="plots/coOrd.svg"/>
                </div>
                <div class="details">
                    <figure class="code">
                        <pre>
                            <code class="lang-matlab">
cryst=spinw;
cryst.genlattice('lat_const',[8 8 6]);
cryst.addatom('r',[1/4 1/4 0],'S',1);
cryst.addatom('r',[3/4 1/4 0],'S',1);
cryst.addatom('r',[1/4 3/4 0],'S',1);
cryst.addatom('r',[3/4 3/4 0],'S',1);
cryst.gencoupling;
cryst.addmatrix('label','D','mat',[1 -1 0]);
cryst.addcoupling(‘mat’,'D',’bond’,1);
                            </code>
                        </pre>
                    </figure>
                </div>
            </div>
        </content>
    </div>
</section>

<section class="blank" id="spinwave1">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">spinw.spinwave(Q)</div>
        </div>
        <content>
            <h3 style="text-align: center"><code>swSpec = spinw.spinwave({Q1 Q2 nQ})</code></h3>
            <ul>
                <li>Solves the general Hamiltonian</li>
                <li><b>Commensurate</b> and <b>incommensurate</b> magnetic structures</li>
                <li>Calculates the spin-spin correlation function in xyz coordinate system:</li>
                <br> $$ S^{\alpha\beta}(k, \omega) $$
                <li>Two methods:
                    <ul>
                        <li>diagonalizing Hermitian matrixa $\rightarrow$ fast but only for strictly positive definite matrices</li>
                        <li>diagonalizin non-Hermitian matrixa $\rightarrow$ bit slower, but works for non positive definite matrices</li>
                    </ul>
                </li>
                <li>$Q$ can be a $3\cdot nQ$ matrix or cell that defines linear scans between points</li>
            </ul>
            <!--TODO Add pictures-->
        </content>
    </div>
</section>

<section class="blank" id="spinwave2">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">spinw.spinwave(Q,’option’,value,...)</div>
        </div>
        <content>
            <p>There are a few important options:</p>
            <h3><br><code>formfact</code></h3>
            <ul>
                <li><code>true</code>: Includes magnetic form factor stored in <code>spinw.unit_cell</code></li>
                <li><b><code>false</code></b>: Magnetic form factor is not considered.</li>
            </ul>
            <h3><br><code>gtensor</code></h3>
            <ul>
                <li><code>true</code>: g-tensor is included in the spin-spin correlation function.</li>
                <li><b><code>false</code></b>: g-tensor is not considered </li>
            </ul>
            <h3><br><code>hermit</code></h3>
            <ul>
                <li><b><code>true</code></b>: Colpa method is used.</li>
                <li><code>false</code>: White method is used</li>
            </ul>
            <h3><br><code>usemex</code></h3>
            <ul>
                <li><code>true</code>: Use compiled code for speedup (especially for small magnetic unit cells)</li>
                <li><b><code>false</code></b>: Use MATLAB JIT code</li>
            </ul>
        </content>
    </div>
</section>

<section class="blank" id="spinSpinCorrelation1">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Spin-spin correlation function</div>
        </div>
        <content>
            <h3 style="text-align: center"><code>swSpec = spinw.spinwave({Q1 Q2 nQ})</code></h3>
            <p><b><code>swSpec</code></b> structure for commensurate structures:</p>
            <ul>
                <li><span style="padding-right: 5ch;text-align: left"><code>.omega</code></span>- D:$[2\cdot nMagExt, nHkl]$, dispersion at every Q-point</li>
                <li><span style="padding-right: 7ch;text-align: left"><code>.Sab</code></span>- D:$[3, 3, 2, \cdot nMagExt, nHkl]$, 3x3 correlation function for every omega and Q</li>
                <li><span style="padding-right: 7ch;text-align: left"><code>.hkl</code></span>- D:$[3, nHkl]$, Q points in r.l.u.</li>
                <li><span style="padding-right: 6ch;text-align: left"><code>.hklA</code></span>- D:$[3, nHkl]$, Q points in $\unicode{x212B}^{-1}$, xyz coordinate system</li>
                <li><span style="padding-right: 4ch;text-align: left"><code>.incomm</code></span>- Whether the spectrum is calculated in incommensurate mode.</li>
                <li><span style="padding-right: 7ch;text-align: left"><code>.obj</code></span>- Copy of the input spinw object.</li>
            </ul>
            <p>If there are several crystallographic twins, <code>.omega</code> and <code>.Sab</code> are packaged into a cell that contains nTwin number of matrices.</p>
            <p>For incommensurate magnetic structures nHkl is tripled: $(k-k_m,k,k+k_m)$.</p>
        </content>
    </div>
</section>


<section class="blank" id="spinSpinCorrelation2">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Spin-spin correlation function - Neutron cross-section</div>
        </div>
        <content>
            <h3 style="text-align: center"><code>swSpec = <b>sw_neutron</b>(swSpec, ‘pol’,true,’uv’,{u1 v1})</code></h3>
            <p>Calculates the polarised/unpolarised neutron scattering cross section.</p>
            <p>New fields:</p>
            <ul>
                <li><span style="padding-right: 5ch;text-align: left"><code>.Sperp</code></span>- D:$[2\cdot nMagExt, nHkl]$, neutron scattering intensity for each .omega and Q</li>
                <li><span style="padding-right: 6ch;text-align: left"><code>.intP</code></span>- D:$[3, 2, \cdot nMagExt, nHkl]$, polarised intensity</li>
                <li><span style="padding-right: 7ch;text-align: left"><code>.Pab</code></span>- D:$[3, 3, 2\cdot nMagExt, nHkl]$, polarisation matrix for every mode and Q</li>
                <li><span style="padding-right: 7ch;text-align: left"><code>.Mab</code></span>- D:$[3, 3, 2\cdot nMagExt, nHkl]$, spin-spin correlation function in the Blue-Maleev coordinate
                    system ($x\parallel Q$, $y$ in scattering plane, $z$ vertical)</li>
            </ul>
           </content>
    </div>
</section>

<section class="blank" id="spinSpinCorrelation3">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Spin-spin correlation function - Energy dependence</div>
        </div>
        <content>
            <h3 style="text-align: center"><code>swSpec = <b>sw_egrid</b>(swSpec, ‘component’,{’Sxx’ ‘Syy’},’Evect’,E)</code></h3>
            <p>Convolutes selected elements of the spin-spin correlation function.</p>
            <ul>
                <li><b>‘<code>component</code>’</b>: selects either a single element: ‘<code>Sperp</code>’, ‘<code>S$_{xx}$+S$_{yy}$+S$_{zz}$</code>’, ‘<code>S$_{xx}$</code>’, etc. or several components to compare: {‘<code>S$_{xx}$</code>’, ‘<code>S$_{yy}$</code>’}, etc.</li>
                <li><b>'<code>Evect</code>'</b>: energy bin (bin edges)</li>
            </ul>
            <p>New fields:</p>
            <ul>
                <li><span style="padding-right: 5ch;text-align: left"><code>.swConv</code></span>- D:$[nE, nHKL]$, convoluted spectrum</li>
                <li><span style="padding-right: 6ch;text-align: left"><code>.swInt</code></span>- D:$[nMode, nHKL]$, polarised intensity</li>
            </ul>
        </content>
    </div>
</section>

<section class="blank" id="spinSpinCorrelation4">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Spin-spin correlation function - Instrumental Resolution</div>
        </div>
        <content>
            <h3 style="text-align: center"><code>swSpec = <b>sw_instrument</b>(swSpec, ‘dE’,dE1, ‘dQ’, dQ1, ...)</code></h3>
            <p>Introduces instrumental and other factors to the convoluted spectrum.</p>
            <ul>
                <li>Finite energy and Q resolution (Gaussian).</li>
                <li>($k_i$, $Theta_{Min}$) to calculate the measurable ($E$,$Q$) volume.</li>
                <li>energy transfer dependent energy resolution for TOF.</li>
                <li><b>'<code>norm</code>'</b>:true to normalize the spectrum to <b>mbarn/meV/cell</b> units</li>
            </ul>
            <p>New fields:</p>
            <ul>
                <li><span style="padding-right: 5ch;text-align: left"><code>.swRaw</code></span>- D:$[nE, nHKL]$, original convoluted spectrum</li>
                <li><span style="padding-right: 6ch;text-align: left"><code>.norm</code></span></li>
                <li><span style="padding-right: 8ch;text-align: left"><code>.ki</code></span></li>
                <li><span style="padding-right: 8ch;text-align: left"><code>.dE</code></span></li>
                <li><span style="padding-right: 8ch;text-align: left"><code>.dQ</code></span></li>
            </ul>
        </content>
    </div>
</section>
<section class="code color--light" id="SymmetryAnalysis">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Symmetry Analysis</div>
        </div>
        <content>
            <p>Determine the symmetry allowed elements of the matrices with <code>spinw.getmatrix</code> or <code>spinw.setmatrix</code>.
                <br>Most common usage settings:</p>
            <p>Text output of the possible modes.</p>
            <figure class="code">
                <pre>
                    <code class="lang-matlab">spinw.getmatrix(‘mat’,’J1’);</code>
                </pre>
            </figure>
            <p>Matrix output of the possible modes, D: [3 3 nModes].</p>
            <figure class="code">
                <pre>
<code class="lang-matlab">normModes = spinw.getmatrix(‘mat’,’J1’);</code>
                </pre>
            </figure>
            <p>Assigning pre-factors for the calculated modes and save them into the <code>J1</code> matrix</p>
            <figure class="code">
                <pre>
<code class="lang-matlab">spinw.setmatrix(‘mat’,’J1’,’pref’,P1);</code>
                </pre>
            </figure>
        </content>
    </div>
</section>

</section>
<section>

    <section class="subsection color--radiant" id="symbolicHead">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1>Evaluating the Hamiltonian - Symbolically</h1>
            <div class="description">
                Solving the system symbolically.
            </div>
        </div>
    </section>

<section class="code color--light" id="symbolic1">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Symbolic calculation example</div>
        </div>
        <content>
        <figure class="code">
            <pre>
                <code class="lang-matlab">chainS = spinw;
chainS.symbolic(true)
chainS.genlattice('lat_const', [3 8 8])
chainS.addatom('r', [0 0 0], 'S', sym(1))
chainS.gencoupling;
chainS.addmatrix('label', 'J1')
chainS.addmatrix('label', 'J2')
chainS.addcoupling('mat', 'J1', 'bond', 1);
chainS.addcoupling('mat', 'J2', 'bond', 2);
chainS.genmagstr('mode', 'helical', 'k', sym([1/2 0 0]), 'nExt',[2 1 1], 'n', sym([0 0 1]), 'S', sym([0 1 0])');
chSpecSym = chainS.spinwave;</code>
            </pre>
        </figure>
        <p>$$-(e^{-4\pi h i} - 1)\sqrt{J_2^2 - 2J_2^2e^{4\pi h i} +J_2^2e^{8\pi h i} - J_1^2e^{4\pi h i} + 4J_1J_2e^{4\pi h i}}$$</p>
        <p>$$ 2\cos (2\pi h)\sqrt{J_1^2 + 4J_1J_2 - 4J_2^2\sin^2(2\pi h) }$$</p>
        </content>
    </div>
</section>

<section class="code color--light" id="symbolic2">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">Symbolic calculation example</div>
        </div>
        <content>
        <figure class="code">
            <pre>
                <code class="lang-matlab">syms('J1','J2');
omega1 = subs(chSpecSym.omega(1),[J1 J2],[1 0.2]);
ezplot(real(omega1),[0 1])</code>
            </pre>
        </figure>
        <!--TODO Add a picture-->
        </content>
    </div>
</section>


<style>
    #double li  {
        width:50%;
        float:left;
        display:inline;}
    #triple li  {
        width:33.333%;
        float:left;
        display:inline;
    }
    #quad li    {
        width:25%;
        float:left;
        display:inline;
    }
</style>

</section>
<section>

    <section class="subsection color--radiant" id="allFns">
        <div class="grid-wrapper">
            <div class="logo"></div>
            <h1>Available functions</h1>
            <div class="description">
                Reference list of all available functions.
            </div>
        </div>
    </section>

<section class="code color--light" id="methods">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">All methods of the spinw object</div>
        </div>
        <content>
            <h2>SpinW methods:</h2>
            <ul id="quad">
                <li>abc</li>
                <li>addaniso</li>
                <li>addatom</li>
                <li>addcoupling</li>
                <li>addg</li>
                <li>addmatrix</li>
                <li>addtwin</li>
                <li>anneal</li>
                <li>annealloop</li>
                <li>atom</li>
                <li>basisvector</li>
                <li>copy</li>
                <li>corespec</li>
                <li>couplingtable</li>
                <li>delete</li>
                <li>disp</li>
                <li>energy</li>
                <li>export</li>
                <li>field</li>
                <li>fileid</li>
                <li>fitpow</li>
                <li>fitspec</li>
                <li>formula</li>
                <li>fourier</li>
                <li>fouriersym</li>
                <li>gencoupling</li>
                <li>genlattice</li>
                <li>genmagstr</li>
                <li>getmatrix</li>
                <li>horace</li>
                <li>intmatrix</li>
                <li>isvalid</li>
                <li>magtable</li>
                <li>matom</li>
                <li>matparser</li>
                <li>meanfield</li>
                <li>moment</li>
                <li>natom</li>
                <li>nbond</li>
                <li>newcell</li>
                <li>nmagext</li>
                <li>nmat</li>
                <li>nosym</li>
                <li>notwin</li>
                <li>ntwin</li>
                <li>optmagsteep</li>
                <li>optmagstr</li>
                <li>phonon</li>
                <li>phononsym</li>
                <li>plot</li>
                <li>powspec</li>
                <li>setmatrix</li>
                <li>spinw</li>
                <li>spinwave</li>
                <li>spinwavesym</li>
                <li>struct</li>
                <li>structfact</li>
                <li>symbolic</li>
                <li>symmetry</li>
                <li>temperature</li>
                <li>tisza</li>
                <li>twinq</li>
                <li>unitcell</li>
                <li>version</li>
            </ul>
        </content>
    </div>
</section>

<section class="code color--light" id="useful">
    <div class="grid-wrapper">
        <div class="header">
            <div class="logo"></div>
            <div class="section">All methods of the spinw object</div>
        </div>
        <content>
            <h3>Tools:</h3>
            <ul id="quad">
                <li>sw_atomdata</li>
                <li>sw_freemem</li>
                <li>sw_cmod</li>
                <li>sw_converter</li>
                <li>sw_idata</li>
                <li>sw_initialize</li>
                <li>sw_parstr</li>
                <li>sw_qscan</li>
                <li>sw_readparam</li>
                <li>sw_rootdir</li>
                <li>sw_status</li>
                <li>sw_uniquetol</li>
                <li>sw_update</li>
                <li>sw_version</li>
            </ul>
            <h3>Magnetic Structure:</h3>
            <ul id="quad" style="width: 100%">
                <li>sw_annealfigure</li>
                <li>sw_annealplot</li>
                <li>sw_intsf</li>
                <li>sw_fstat</li>
                <li>sw_fsub</li>
                <li>sw_mff</li>
                <li>sw_plotsf</li>
            </ul>
            <h3>Basic Geometry:</h3>
            <ul id="quad" style="width: 100%">
                <li>sw_cartesian</li>
                <li>sw_mirror</li>
                <li>sw_nvect</li>
                <li>sw_rot</li>
            </ul>
            <h3>Spectrum:</h3>
            <ul id="quad" style="width: 100%">
                <li>sw_econtract</li>
                <li>sw_extendlattice</li>
                <li>sw_conv</li>
                <li>sw_instrument</li>
                <li>sw_neutron</li>
                <li>sw_omegasum</li>
                <li>sw_plotspec</li>
                <li>sw_readspec</li>
            </ul>
            <h3>Plotting:</h3>
            <ul id="quad" style="width: 100%">
                <li>+sw_plot</li>
            </ul>
            <h3>Symmetry:</h3>
            <ul id="quad" style="width: 100%">
                <li>+swsym</li>
            </ul>
        </content>
    </div>
</section>
</section>